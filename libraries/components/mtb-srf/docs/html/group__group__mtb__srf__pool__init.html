<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Secure Request Framework</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Secure Request Framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__group__mtb__srf__pool__init.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">API Reference</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Secure Request Pool Init ibrary</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">General Description</h2>
<p >Secure Request Pool Init Library provides an implementation of secure request pool mtb_srf_pool_t, which is composed of multiple secure request objects <a class="el" href="group__group__mtb__srf__structures.html#structmtb__srf__request__ns__t" title="Secure request description structure.">mtb_srf_request_ns_t</a>. </p>
<p >Secure request objects need to be accessible by both the secure and non-secure world. In practice, this means that they should be allocated out of the "shared memory" region rather than e.g. off the stack. This, in turn, means that any RAM which is allocated for secure request pool description struct mtb_srf_pool_t is statically allocated for the lifetime of the program. Therefore, it would be inefficient for every secure request client to allocate its own secure request object. There needs to be a means for sharing. This need is satisfied by a secure request pool, which allows multiple secure request clients to share a small number of pre-allocated secure request pool description struct. A secure request pool is specific to a particular non-secure processing environment. I.e. in a system where both the CM33_NS and the CM55 are making secure requests, there would be two secure request pools, one for the CM33_NS and one for the CM55. Usage of this mechanism is optional. If needed to satisfy some special case, a secure request client can allocate their own custom secure request object and use that instead.</p>
<p >Refer to <a class="el" href="group__group__mtb__srf__pool.html">Secure Request Pool Library</a> for more information. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="groups" name="groups"></a>
API Reference</h2></td></tr>
<tr class="memitem:group__group__mtb__srf__pool__structures"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__mtb__srf__pool__structures.html">Data Structures</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga4cbdbc032d8d67f0ddf312c108b5a013"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__mtb__srf__pool__init.html#ga4cbdbc032d8d67f0ddf312c108b5a013">MTB_SRF_POOL_ENTRY_SIZE</a>(input_values_length,  output_values_length)</td></tr>
<tr class="memdesc:ga4cbdbc032d8d67f0ddf312c108b5a013"><td class="mdescLeft">&#160;</td><td class="mdescRight">A tool to calculate how much memory to provide for a pool.  <a href="group__group__mtb__srf__pool__init.html#ga4cbdbc032d8d67f0ddf312c108b5a013">More...</a><br /></td></tr>
<tr class="separator:ga4cbdbc032d8d67f0ddf312c108b5a013"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga4656949c083236dd8f93fa2cc347fb97"><td class="memItemLeft" align="right" valign="top">cy_rslt_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__mtb__srf__pool__init.html#ga4656949c083236dd8f93fa2cc347fb97">mtb_srf_pool_init</a> (mtb_srf_pool_t *pool, uint32_t *allocated_mem, size_t num_entries, size_t input_len_per_entry, size_t output_len_per_entry)</td></tr>
<tr class="memdesc:ga4656949c083236dd8f93fa2cc347fb97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes an secure request pool instance.  <a href="group__group__mtb__srf__pool__init.html#ga4656949c083236dd8f93fa2cc347fb97">More...</a><br /></td></tr>
<tr class="separator:ga4656949c083236dd8f93fa2cc347fb97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga4cbdbc032d8d67f0ddf312c108b5a013" name="ga4cbdbc032d8d67f0ddf312c108b5a013"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4cbdbc032d8d67f0ddf312c108b5a013">&#9670;&nbsp;</a></span>MTB_SRF_POOL_ENTRY_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MTB_SRF_POOL_ENTRY_SIZE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">input_values_length, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">output_values_length&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">        (<a class="code hl_define" href="group__group__mtb__srf__pool.html#ga6a987874362ead4d1391500887655e6c">MTB_SRF_ROUND_UP</a>(<span class="keyword">sizeof</span>(<a class="code hl_struct" href="group__group__mtb__srf__structures.html#structmtb__srf__input__ns__t">mtb_srf_input_ns_t</a>) + input_values_length, <a class="code hl_define" href="group__group__mtb__srf__pool.html#ga5df41c2a4b1880bd4a38e93517957cb5">MTB_SRF_POOL_ALIGNMENT</a>) + \</div>
<div class="line">        MTB_SRF_ROUND_UP(<span class="keyword">sizeof</span>(<a class="code hl_struct" href="group__group__mtb__srf__structures.html#structmtb__srf__output__ns__t">mtb_srf_output_ns_t</a>) + output_values_length, <a class="code hl_define" href="group__group__mtb__srf__pool.html#ga5df41c2a4b1880bd4a38e93517957cb5">MTB_SRF_POOL_ALIGNMENT</a>) + \</div>
<div class="line">        MTB_SRF_ROUND_UP((<span class="keyword">sizeof</span>(<a class="code hl_struct" href="group__group__mtb__srf__structures.html#structmtb__srf__invec__ns__t">mtb_srf_invec_ns_t</a>) * <a class="code hl_define" href="group__group__mtb__srf__structures.html#gaa8d80a1f52cce2faee7efa5070b68a45">MTB_SRF_MAX_IOVEC</a>), <a class="code hl_define" href="group__group__mtb__srf__pool.html#ga5df41c2a4b1880bd4a38e93517957cb5">MTB_SRF_POOL_ALIGNMENT</a>) + \</div>
<div class="line">        MTB_SRF_ROUND_UP((<span class="keyword">sizeof</span>(<a class="code hl_struct" href="group__group__mtb__srf__structures.html#structmtb__srf__outvec__ns__t">mtb_srf_outvec_ns_t</a>) * <a class="code hl_define" href="group__group__mtb__srf__structures.html#gaa8d80a1f52cce2faee7efa5070b68a45">MTB_SRF_MAX_IOVEC</a>), <a class="code hl_define" href="group__group__mtb__srf__pool.html#ga5df41c2a4b1880bd4a38e93517957cb5">MTB_SRF_POOL_ALIGNMENT</a>))</div>
<div class="ttc" id="agroup__group__mtb__srf__pool_html_ga5df41c2a4b1880bd4a38e93517957cb5"><div class="ttname"><a href="group__group__mtb__srf__pool.html#ga5df41c2a4b1880bd4a38e93517957cb5">MTB_SRF_POOL_ALIGNMENT</a></div><div class="ttdeci">#define MTB_SRF_POOL_ALIGNMENT</div><div class="ttdoc">Address alignment value of pool in bytes.</div><div class="ttdef"><b>Definition:</b> mtb_srf_pool.h:114</div></div>
<div class="ttc" id="agroup__group__mtb__srf__pool_html_ga6a987874362ead4d1391500887655e6c"><div class="ttname"><a href="group__group__mtb__srf__pool.html#ga6a987874362ead4d1391500887655e6c">MTB_SRF_ROUND_UP</a></div><div class="ttdeci">#define MTB_SRF_ROUND_UP(N, S)</div><div class="ttdoc">Round up.</div><div class="ttdef"><b>Definition:</b> mtb_srf_pool.h:107</div></div>
<div class="ttc" id="agroup__group__mtb__srf__structures_html_gaa8d80a1f52cce2faee7efa5070b68a45"><div class="ttname"><a href="group__group__mtb__srf__structures.html#gaa8d80a1f52cce2faee7efa5070b68a45">MTB_SRF_MAX_IOVEC</a></div><div class="ttdeci">#define MTB_SRF_MAX_IOVEC</div><div class="ttdoc">Max number of vectors that can be provided to mtb_srf_request_submit.</div><div class="ttdef"><b>Definition:</b> mtb_srf_iovec.h:59</div></div>
<div class="ttc" id="agroup__group__mtb__srf__structures_html_structmtb__srf__input__ns__t"><div class="ttname"><a href="group__group__mtb__srf__structures.html#structmtb__srf__input__ns__t">mtb_srf_input_ns_t</a></div><div class="ttdoc">An input structure.</div><div class="ttdef"><b>Definition:</b> mtb_srf_iovec.h:81</div></div>
<div class="ttc" id="agroup__group__mtb__srf__structures_html_structmtb__srf__invec__ns__t"><div class="ttname"><a href="group__group__mtb__srf__structures.html#structmtb__srf__invec__ns__t">mtb_srf_invec_ns_t</a></div><div class="ttdoc">An input vector - a section of memory to be used along with the length.</div><div class="ttdef"><b>Definition:</b> mtb_srf_iovec.h:64</div></div>
<div class="ttc" id="agroup__group__mtb__srf__structures_html_structmtb__srf__output__ns__t"><div class="ttname"><a href="group__group__mtb__srf__structures.html#structmtb__srf__output__ns__t">mtb_srf_output_ns_t</a></div><div class="ttdoc">An input structure.</div><div class="ttdef"><b>Definition:</b> mtb_srf_iovec.h:96</div></div>
<div class="ttc" id="agroup__group__mtb__srf__structures_html_structmtb__srf__outvec__ns__t"><div class="ttname"><a href="group__group__mtb__srf__structures.html#structmtb__srf__outvec__ns__t">mtb_srf_outvec_ns_t</a></div><div class="ttdoc">An output vector - a section of memory to be used along with the length.</div><div class="ttdef"><b>Definition:</b> mtb_srf_iovec.h:71</div></div>
</div><!-- fragment -->
<p>A tool to calculate how much memory to provide for a pool. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga4656949c083236dd8f93fa2cc347fb97" name="ga4656949c083236dd8f93fa2cc347fb97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4656949c083236dd8f93fa2cc347fb97">&#9670;&nbsp;</a></span>mtb_srf_pool_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cy_rslt_t mtb_srf_pool_init </td>
          <td>(</td>
          <td class="paramtype">mtb_srf_pool_t *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>allocated_mem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_entries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>input_len_per_entry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>output_len_per_entry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes an secure request pool instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pool</td><td>Stores state that secure request pool needs to track between calls. The caller must allocate shared memory for this struct but should not depend on its contents. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">allocated_mem</td><td>Pointer to a section of memory allocated by the caller for the pool to use. Recommend using (MTB_SRF_POOL_ENTRY_SIZE<ul>
<li>num_entries) to calculate for custom pools </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num_entries</td><td>The number of secure request objects that should fit into the pool </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">input_len_per_entry</td><td>The length of input argument array. The default value is MTB_SRF_MAX_ARG_IN_SIZE </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">output_len_per_entry</td><td>The length of output argument array. The default value is MTB_SRF_MAX_ARG_OUT_SIZE</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the status of the initialization</dd></dl>
<p>Initializes an secure request pool instance. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>Secure Request Framework</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
