<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Secure Request Framework</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Secure Request Framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__group__mtb__srf__ipc__init.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">API Reference</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Secure Request IPC integration Initialization</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">General Description</h2>
<p >This library provides support for sending requests from an alternative core to the core with the secure paritition. </p>
<p >The non-secure partition acts as a relay to unpack the request sent over Infineon's interprocessor communication library (MTB-IPC) and submit it in the same way as other non-secure requests. The library also provides functionality to signal completion so the requesting core can view the results. This is accomplished through two roles: Client and Relay. The Client owns a pool of requests that are tied to IPC semaphores that will signal completion. The relay receives unpacks requests on the core containing the secure region before processing and signalling. This requires each of the contexts to be set up to create the relay relationship and begin submitting requests. Refer to SRF documentation <a class="el" href="group__group__mtb__srf.html">Secure Request Framework</a> for more information on secure requests and request pools. The APIs for submiting a request remain the same on all cores, but a client context must be set up on the core that needs IPC in order for the request to be sent correctly. Secure Request IPC integration provides an implementation of contexts and structures used to store states and signal information over Infineon's interprocessor communication library (MTB-IPC). These contexts signify the role each process plays in ensuring requests are safely submitted to the secure world. The implementation also provides a request struct for carrying necessary data and signalling back. These are stored in a pool, similar to SRF requests from the same core.</p>
<p >Refer to <a class="el" href="group__group__mtb__srf__ipc.html#group_mtb_srf_ipc_code_snippets">Code Snippets</a> for more information. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="groups" name="groups"></a>
API Reference</h2></td></tr>
<tr class="memitem:group__group__mtb__srf__ipc__structures"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__mtb__srf__ipc__structures.html">Data Structures</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gab15dd1090a2d03cc6daf5c64441046f0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__mtb__srf__ipc__init.html#gab15dd1090a2d03cc6daf5c64441046f0">MTB_SRF_IPC_REQUEST_DATA_ALLOC</a>(requests)&#160;&#160;&#160;    do { CY_SECTION_SHAREDMEM static <a class="el" href="group__group__mtb__srf__ipc__structures.html#structmtb__srf__ipc__packet__t">mtb_srf_ipc_packet_t</a> _mtb_srf_ipc_request_arr[MTB_SRF_POOL_SIZE] <a class="el" href="group__group__mtb__srf.html#ga658a13a20dd628548ad16d7bd06cc278">_MTB_SRF_DATA_ALIGN</a>; shared = &amp;requests; } while (0)</td></tr>
<tr class="memdesc:gab15dd1090a2d03cc6daf5c64441046f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro for requests array shared memory allocation.  <a href="group__group__mtb__srf__ipc__init.html#gab15dd1090a2d03cc6daf5c64441046f0">More...</a><br /></td></tr>
<tr class="separator:gab15dd1090a2d03cc6daf5c64441046f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaf56de7d8077e7785327e15bd1923aa0d"><td class="memItemLeft" align="right" valign="top">cy_rslt_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__mtb__srf__ipc__init.html#gaf56de7d8077e7785327e15bd1923aa0d">mtb_srf_ipc_pool_init</a> (mtb_srf_ipc_pool_t *pool, <a class="el" href="group__group__mtb__srf__ipc__structures.html#structmtb__srf__ipc__pool__cfg__t">mtb_srf_ipc_pool_cfg_t</a> *cfg)</td></tr>
<tr class="memdesc:gaf56de7d8077e7785327e15bd1923aa0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes an secure request pool instance.  <a href="group__group__mtb__srf__ipc__init.html#gaf56de7d8077e7785327e15bd1923aa0d">More...</a><br /></td></tr>
<tr class="separator:gaf56de7d8077e7785327e15bd1923aa0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga94d5de673c0f94868d11a5f961d624a2"><td class="memItemLeft" align="right" valign="top">cy_rslt_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__mtb__srf__ipc__init.html#ga94d5de673c0f94868d11a5f961d624a2">mtb_srf_setup_client_context</a> (mtb_srf_ipc_client_context_t *client_context, <a class="el" href="group__group__mtb__srf__ipc__structures.html#structmtb__srf__ipc__client__context__cfg__t">mtb_srf_ipc_client_context_cfg_t</a> *cfg)</td></tr>
<tr class="memdesc:ga94d5de673c0f94868d11a5f961d624a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes an secure request pool instance.  <a href="group__group__mtb__srf__ipc__init.html#ga94d5de673c0f94868d11a5f961d624a2">More...</a><br /></td></tr>
<tr class="separator:ga94d5de673c0f94868d11a5f961d624a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac64d4a91c5d10deb3c3beaf93433fbce"><td class="memItemLeft" align="right" valign="top">cy_rslt_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__mtb__srf__ipc__init.html#gac64d4a91c5d10deb3c3beaf93433fbce">mtb_srf_ipc_client_init</a> (mtb_srf_ipc_client_context_t *context, <a class="el" href="group__group__mtb__srf__ipc__structures.html#structmtb__srf__ipc__client__init__cfg__t">mtb_srf_ipc_client_init_cfg_t</a> *cfg)</td></tr>
<tr class="memdesc:gac64d4a91c5d10deb3c3beaf93433fbce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes Semaphores, Mailbox, and sets up Client context This function requires that the IPC section of mtb_srf_config.h is populated and IPC instance in config struct is initialized.  <a href="group__group__mtb__srf__ipc__init.html#gac64d4a91c5d10deb3c3beaf93433fbce">More...</a><br /></td></tr>
<tr class="separator:gac64d4a91c5d10deb3c3beaf93433fbce"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gab15dd1090a2d03cc6daf5c64441046f0" name="gab15dd1090a2d03cc6daf5c64441046f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab15dd1090a2d03cc6daf5c64441046f0">&#9670;&nbsp;</a></span>MTB_SRF_IPC_REQUEST_DATA_ALLOC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MTB_SRF_IPC_REQUEST_DATA_ALLOC</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">requests</td><td>)</td>
          <td>&#160;&#160;&#160;    do { CY_SECTION_SHAREDMEM static <a class="el" href="group__group__mtb__srf__ipc__structures.html#structmtb__srf__ipc__packet__t">mtb_srf_ipc_packet_t</a> _mtb_srf_ipc_request_arr[MTB_SRF_POOL_SIZE] <a class="el" href="group__group__mtb__srf.html#ga658a13a20dd628548ad16d7bd06cc278">_MTB_SRF_DATA_ALIGN</a>; shared = &amp;requests; } while (0)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Macro for requests array shared memory allocation. </p>
<p >It is not mandatory to use it for data allocation, user can allocate the memory in the more convenient for them way. Please refer to MTB SRF library documentation for the requirements for memory allocation if macro is not used.</p>
<p >Can be used only in function scope. Params: requests - mtb_srf_ipc_packet_t** , which will point to the shared memory </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaf56de7d8077e7785327e15bd1923aa0d" name="gaf56de7d8077e7785327e15bd1923aa0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf56de7d8077e7785327e15bd1923aa0d">&#9670;&nbsp;</a></span>mtb_srf_ipc_pool_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cy_rslt_t mtb_srf_ipc_pool_init </td>
          <td>(</td>
          <td class="paramtype">mtb_srf_ipc_pool_t *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group__mtb__srf__ipc__structures.html#structmtb__srf__ipc__pool__cfg__t">mtb_srf_ipc_pool_cfg_t</a> *&#160;</td>
          <td class="paramname"><em>cfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes an secure request pool instance. </p>
<p >See snippets for more details on how to configure an SRF IPC pool.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">pool</td><td>Stores state that secure request pool needs to track between calls. The caller must allocate shared memory for this struct but should not depend on its contents. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cfg</td><td>Config struct to set up IPC SRF pool. Please refer to code </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the status of the initialization </dd></dl>

</div>
</div>
<a id="ga94d5de673c0f94868d11a5f961d624a2" name="ga94d5de673c0f94868d11a5f961d624a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga94d5de673c0f94868d11a5f961d624a2">&#9670;&nbsp;</a></span>mtb_srf_setup_client_context()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cy_rslt_t mtb_srf_setup_client_context </td>
          <td>(</td>
          <td class="paramtype">mtb_srf_ipc_client_context_t *&#160;</td>
          <td class="paramname"><em>client_context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group__mtb__srf__ipc__structures.html#structmtb__srf__ipc__client__context__cfg__t">mtb_srf_ipc_client_context_cfg_t</a> *&#160;</td>
          <td class="paramname"><em>cfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes an secure request pool instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">client_context</td><td>Stores state that client process needs to track between calls. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cfg</td><td>Config containing items necessary for client communication </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the status of the initialization </dd></dl>

</div>
</div>
<a id="gac64d4a91c5d10deb3c3beaf93433fbce" name="gac64d4a91c5d10deb3c3beaf93433fbce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac64d4a91c5d10deb3c3beaf93433fbce">&#9670;&nbsp;</a></span>mtb_srf_ipc_client_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cy_rslt_t mtb_srf_ipc_client_init </td>
          <td>(</td>
          <td class="paramtype">mtb_srf_ipc_client_context_t *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group__mtb__srf__ipc__structures.html#structmtb__srf__ipc__client__init__cfg__t">mtb_srf_ipc_client_init_cfg_t</a> *&#160;</td>
          <td class="paramname"><em>cfg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes Semaphores, Mailbox, and sets up Client context This function requires that the IPC section of mtb_srf_config.h is populated and IPC instance in config struct is initialized. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">context</td><td>Client context to store all relevant MTB SRF IPC information </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cfg</td><td>Config struct containing allocated memory and data structures </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>cy_rslt_t </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>Secure Request Framework</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
