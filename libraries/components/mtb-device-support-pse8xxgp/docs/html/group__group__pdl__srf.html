<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PSOC E8XXGP Device Support Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen_style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a href="http://www.cypress.com/"><img alt="Logo" src="logo.png"/></a></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">PSOC E8XXGP Device Support Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__group__pdl__srf.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">API Reference</a>  </div>
  <div class="headertitle"><div class="title">PDL SRF (PDL Secure Request Framework)<div class="ingroups"><a class="el" href="group__group__pdl__top.html">PDL API Reference</a></div></div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">General Description</h2>
<p >This file contains the cy_pdl_srf_module_register API. </p>
<p >This must be called on the secure side during startup after Secure Request Framework (SRF) initialization in order to call Secure Aware PDL APIs.</p>
<h1><a class="anchor" id="group_pdl_srf_general"></a>
Secure Aware PDL</h1>
<p >Some APIs are marked as Secure Aware. This means that if the driver's hardware resource is marked as a secure resource in the Peripheral Protection Controller (PPC) and these APIs are called from a non-secure CPU state, the PDL will submit a request to the Secure Request Framework (SRF) middleware to transition to a secure CPU state to perform the operation. From the application's perspective, the API will behave the same whether it is called from a secure or non-secure CPU state albeit slower.</p>
<p >Note that the inverse is not supported - calling to an API that operates on a non-secured resource from a secure CPU state will not be automatically handled and will result in a PPC fault. To perform this action legally, abide by ARM guidelines for calling to NS from S.</p>
<p >The general rule is</p><ol type="1">
<li>Secure-aware APIs: Some of these APIs involve multiple PPC regions. See the documentation for individual APIs for restrictions on how these PPC regions must be configured relative to each other. Custom PPC configurations which do not meet the requirements of a security API may be handled as follows:<ol type="a">
<li>Access to secure resources from a non-secure processing environment can be enabled by creating a custom secure operation. See the secure request framework documentation for details.</li>
<li>Access to a non-secure resource from a secure processing environment may be achieved either by following ARM's "guidelines for calling to NS from S" or by using the <code>GET_NSALIAS_ADDRESS</code> macro.</li>
</ol>
</li>
<li>Non Secure-aware APIs: All involved PPC regions should be either secure (calling to the API in secure CPU state) or non-secure (calling to the API in non-secure CPU state).</li>
</ol>
<p >This functionality is automatically enabled on devices with ARM TrustZone processors. To disable all driver Secure Awareness, set the DEFINE+=CY_PDL_ENABLE_SECURE_AWARE=0 in the application Makefile. To disable specific drivers, each has a matching macro that can be used in the same way, e.g. RTC has CY_PDL_ENABLE_SECURE_AWARE_RTC. See individual driver documentation for specific macro names.</p>
<p >Marking a hardware resource as Non-Secure via the PPC in the device configurator will also disable the Secure Aware driver to save memory during secure image compilation. For drivers with multiple hardware resource instances (e.g. SCBs), the Secure Aware APIs will take the default or SRF route depending on if the instance they're invoked on is Secured. If all resources are marked Non-Secure, the Secure Aware driver will be disabled.</p>
<p >Secure Awareness is only relevent on APIs which interact with hardware resources. APIs which do not interact with hardware resources have notes in the API's function header comments documenting that they are safe to call from either state.</p>
<h1><a class="anchor" id="group_pdl_srf_setup"></a>
Setup</h1>
<p >The Secure Aware PDL that requires a shared request pool (see SRF documentation) is setup for it to allocate requests from. This pool is initialized by default as part of cybsp_init on the Non-Secure CPU.</p>
<p >The <a class="el" href="group__group__pdl__srf__funcs.html#ga44904e459739089d9bd4bcfdfa69d5b8">cy_pdl_srf_module_register</a> API must be called with the default cybsp_secure_context secure context to register the secure operations for SRF to reference. This is similarly done as part of cybsp_init, but on the Secure CPU. </p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="groups" name="groups"></a>
API Reference</h2></td></tr>
<tr class="memitem:group__group__pdl__srf__common"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__pdl__srf__common.html">PDL SRF Common (PDL Secure Request Framework Common)</a></td></tr>
<tr class="memdesc:group__group__pdl__srf__common"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal helpers for common code between the Secure Aware PDL drivers. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__rtc__srf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__rtc__srf.html">RTC SRF      (RTC Secure Request Framework)</a></td></tr>
<tr class="memdesc:group__group__rtc__srf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal operation declarations to enable Secure Aware RTC. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__smif__srf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__smif__srf.html">SMIF SRF     (SMIF Secure Request Framework)</a></td></tr>
<tr class="memdesc:group__group__smif__srf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal operation declarations to enable Secure Aware SMIF. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sysclk__srf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sysclk__srf.html">SYSCLK SRF   (SYSCLK Secure Request Framework)</a></td></tr>
<tr class="memdesc:group__group__sysclk__srf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal operation declarations to enable Secure Aware SYSCLK. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__syspm__srf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__syspm__srf.html">SYSPM SRF    (SYSPM Secure Request Framework)</a></td></tr>
<tr class="memdesc:group__group__syspm__srf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal operation declarations to enable Secure Aware SYSPM. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__pdl__srf__macros"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__pdl__srf__macros.html">Macros</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__pdl__srf__enums"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__pdl__srf__enums.html">Enums</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__pdl__srf__funcs"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__pdl__srf__funcs.html">Functions</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part
<div id="nav-path" class="navpath">
    <ul>
        <li class="footer">
            Generated for <b>PSOC E8XXGP Device Support Library</b> by <b>Cypress Semiconductor Corporation</b>.
            All rights reserved.
        </li>
    </ul>
</div>
-->
</body>
</html>
